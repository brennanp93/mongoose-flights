<%- include('../partials/header') %>

<section id="show-page">
    <div>Airline:</div>
    <div><%= flight.airline %></div>
    <div>Airport:</div>
    <div><%= flight.airport %></div>
    <div>Flight No:</div>
    <div><%= flight.flightNo %></div>
    <div>Departs:</div>
    <div><%= flight.departs.toLocaleString('en-US', { dateStyle: 'full', timeStyle: 'short'}) %></div>
</section>

<br><h2>Add A Destination</h2>
<form id="add-review-form" method="POST" action="/flights/<%= flight._id %>/destinations">
    <label>Destination Airport</label>
    <select name="airport">
        <option value="AUS">AUS</option>
        <option value="DFW">DFW</option>
        <option value="DEN">DEN</option>
        <option value="LAX">LAX</option>
        <option value="SFO">SFO</option>
        <option value="MSY">MSY</option>
        <option value="SNA">SNA</option>
    </select>
    <label>Arrives:
        <input type="datetime-local" name="arrival">
    </label>
    <input type="submit" value="Add Flight Detail">
</form>

<!-- //double check this later on -->

<% if (flight.destinations.length) { %>
    <table>
      <thead>
        <tr>
          <th>Date</th>
          <th>Arrival Airport</th>
          <th>Arrival Date</th>
        </tr>
      </thead>
      <tbody>
        <% flight.destinations.forEach(function(d) { %>
          <tr>
            <td><%= d.createdAt.toLocaleDateString() %></td>
            <td><%= d.airport %></td>
            <td><%= d.arrival.toLocaleString('en-US', { dateStyle: 'full', timeStyle: 'short'})%></td>
          </tr>
        <% }); %>
      </tbody>
    </table>
  <% } else { %>
  <h5>No Details Yet</h5>
  <% } %>


  

<br>
<h2>Tickets:</h2>
<ul>
  <%- tickets.map(t =>
  `<li>${t.seat}, $${t.price}</li>`
  )%>
</ul>
<a href="/flights/<%= flight._id %>/tickets/new">New Ticket</a>

<div></div>



<%- include('../partials/footer') %>